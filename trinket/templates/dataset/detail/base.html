{% extends 'page.html' %}
{% load staticfiles %}

{% block stylesheets %}
  {{ block.super }}
  <link rel="stylesheet" type="text/css" href="{% static 'css/dataset.css' %}">
{% endblock %}

{% block content %}

    <div class="container">

      <!-- Header and controls area -->
      <div class="row dataset-heading">
        <div class="col-md-12">
          {% block dataset-heading %}
          <h2 class="dataset-title pull-left">
            {% block dataset-title %}
            <i class="fa fa-cubes text-muted"></i>
            <a href="{{ dataset.owner.get_absolute_url }}">{{ dataset.owner.name }}</a>
            /
            <a href="{{ dataset.get_absolute_url }}"><strong>{{ dataset.name }}</strong></a>
            {% endblock %}
          </h2>

          <div class="pull-right">
          {% block dataset-controls %}
            <input type="hidden" id="stars-api-base-url"  value="{% url 'api:stars-list' %}" />
            <button id="star-btn"
                    class="btn btn-xs btn-default btn-starred {% if dataset_is_starred %} active {% endif %}"
                    aria-pressed="false"
                    autocomplete="off"
                    data-dataset-id="{{ dataset.id }}">
              <i class="fa fa-star"></i>
              <span class="star">Star</span>
              <span class="unstar">Unstar</span>
            </button>

            <!-- TODO: only show if the user has permissions to edit this! -->
            <button class="btn btn-xs btn-default" data-toggle="modal" data-target="#editDatasetInfoModal">
              <i class="fa fa-edit"></i> Edit Info
            </button>
          {% endblock %}
          </div>

          <div class="clearfix"></div>

          {% endblock %}
        </div>
      </div><!-- header and tabs -->

      {% block tabs %}
      <!-- Tab navigation and panes -->
      <div class="row">
        <div class="col-md-12">

          <!-- Nav tabs -->
          <ul class="nav nav-tabs" role="tablist">
            <li role="presentation" {% if panel_name == "files" %}class="active"{% endif %}>
              <a href="{% url 'dataset:detail' dataset.owner.name dataset.name %}">
                <i class="fa fa-folder-open"></i> Files
              </a>
            </li>
            <li role="presentation" {% if panel_name == "schema" %}class="active"{% endif %}>
              <a href="{% url 'dataset:schema' dataset.owner.name dataset.name %}">
                <i class="fa fa-table"></i> Schema
              </a>
            </li>
            <li role="presentation" {% if panel_name == "explore" %}class="active"{% endif %}>
              <a href="{% url 'dataset:explore' dataset.owner.name dataset.name %}">
                <i class="fa fa-area-chart"></i> Explore
              </a>
            </li>
            <li role="presentation" {% if panel_name == "settings" %}class="active"{% endif %}>
              <a href="{% url 'dataset:settings' dataset.owner.name dataset.name %}">
                <i class="fa fa-cog"></i> Settings
              </a>
            </li>
          </ul>

        </div>
      </div>
      {% endblock %}

      <!-- Tab Panel -->
      {% block panel %}

      {% endblock %}

    </div><!-- container ends -->

{% endblock %}

{% block modals %}
  {{ block.super }}
  {% include 'components/modals/edit-dataset-info.html' %}
  {% include 'components/modals/edit-dataset-readme.html' %}
{% endblock %}

{% block javascripts %}
  {{ block.super }}
  <script src="{% static 'js/dataset.js' %}" type="text/javascript"></script>
{% endblock %}
